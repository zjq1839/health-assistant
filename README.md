# 智能健康助手 (Intelligent Health Assistant)

这是一个基于大型语言模型（LLM）和多代理协作模式构建的智能健康助手。它不仅能帮助用户记录和分析日常饮食，还能跟踪运动情况，并提供专业的健康知识问答。

## 项目特色

- **多代理协作 (Multi-Agent Collaboration):** 采用主控制器（Master Controller）和多个专家代理（Expert Agents）的模式，实现复杂任务的协同处理。
- **高级RAG (Advanced RAG):** 结合了混合检索、重排和查询转换等技术，提供更精准、更可靠的知识问答。
- **可扩展性:** 模块化的设计使得添加新的功能代理（如睡眠分析、心理健康等）变得简单。
- **个性化服务:** 通过持续学习用户的健康数据，提供量身定制的建议。

## 系统架构

系统主要由以下几个部分组成：

1.  **主控制器 (Master Controller):**
    - 负责接收所有用户输入。
    - 分析用户意图，并将任务分发给最合适的专家代理。

2.  **专家代理 (Expert Agents):**
    - **饮食分析代理 (Dietary Analysis Agent):** 处理所有与饮食相关的功能，包括记录、分析和生成报告。
    - **运动健康代理 (Fitness & Health Agent):** 记录和分析用户的运动数据，提供健身建议。
    - **知识问答代理 (Knowledge Q&A Agent):** 基于RAG技术，回答通用的健康问题。

3.  **核心模块 (Core):**
    - **状态管理 (State Management):** 在整个会话过程中维护一个统一的状态，方便不同代理之间共享信息。

4.  **知识库 (Knowledge Base):**
    - **营养知识库:** 包含食物营养成分、健康饮食指南等信息。
    - **运动健康知识库:** 包含运动方案、健身动作指导等内容。
    - **通用健康知识库:** 涵盖常见健康问题、医学知识等。

5.  **数据存储 (Data Storage):**
    - **用户数据:** 使用SQLite存储用户的饮食记录、运动记录等个人数据。
    - **向量数据:** 使用FAISS存储知识库的向量表示，支持高效的相似度检索。

## 技术栈

- **LangChain:** 用于构建LLM应用的框架
- **LangGraph:** 用于构建多代理系统的图结构
- **Ollama:** 本地部署的大语言模型
- **FAISS:** 高效的向量检索引擎
- **SQLite:** 轻量级关系型数据库

## 功能特性

1. **饮食管理**
   - 记录每日饮食
   - 分析营养成分
   - 生成饮食报告
   - 提供个性化饮食建议

2. **运动追踪**
   - 记录运动类型和时长
   - 计算消耗热量
   - 制定运动计划
   - 提供运动建议

3. **健康问答**
   - 回答健康相关问题
   - 提供专业知识解释
   - 支持上下文理解
   - 多轮对话交互

## 使用说明

### 环境配置

```bash
# 克隆项目
git clone [项目地址]

# 安装依赖
pip install -r requirements.txt

# 安装并配置Ollama
# 参考Ollama官方文档

# 初始化数据库
python init_db.py
```

### 启动应用

```bash
python main.py
```

### 基本使用

1. **记录饮食**
   ```
   > 早上吃了一个鸡蛋，一杯牛奶
   已记录您的早餐
   ```

2. **查看饮食报告**
   ```
   > 生成今天的饮食报告
   正在分析您的饮食情况...
   ```

3. **记录运动**
   ```
   > 今天跑步半小时
   已记录您的运动情况
   ```

4. **健康咨询**
   ```
   > 每天应该吃多少蛋白质？
   根据一般建议...
   ```

## 项目结构

```
.
├── main.py                 # 主程序入口
├── graph.py               # 图结构定义
├── database.py            # 数据库操作
├── config.py              # 配置文件
├── tools/                 # 工具函数
├── agents/                # 专家代理
├── knowledge_base/        # 知识库
└── tests/                 # 测试文件
```

## 开发计划

- [ ] 添加更多专家代理（如睡眠分析、心理健康等）
- [ ] 优化RAG检索效果
- [ ] 增加数据可视化功能
- [ ] 支持多用户管理
- [ ] 添加API接口

## 贡献指南

1. Fork 本仓库
2. 创建新的分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 开启一个 Pull Request

## 项目分析

### 优势
- **智能交互**：通过多代理协作和高级 RAG，实现高效的任务处理和准确的知识检索。
- **全面健康管理**：覆盖饮食、运动和健康问答，不局限于单一领域。
- **技术先进**：集成最新 MCP 和 RAG 技术，提升系统复杂度和实用性。
- **可扩展**：模块化设计便于未来扩展。

### 挑战与改进
- **性能优化**：LLM 调用可能导致延迟，可引入缓存机制。
- **数据隐私**：加强用户数据保护。
- **知识更新**：定期更新知识库以保持信息时效性。
- **用户界面**：开发图形界面提升可用性。

## 许可证

本项目采用 MIT 许可证 - 详见 [LICENSE](LICENSE) 文件